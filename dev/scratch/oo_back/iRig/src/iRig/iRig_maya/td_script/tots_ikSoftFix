import pymel.core as pm
import maya.cmds as cmds

# Replace soft ik anim curve on control with remap
def do_it():
    for side in ['L', 'R']:
        for part in ['Arm', 'Leg', 'FrontLeg', 'BackLeg']:
            if 'Arm' in part:
                ctrl = side+'_'+part+'_Wrist_Ik_Soft'
            elif 'Leg' in part:
                ctrl = side+'_'+part+'_Ankle_Ik_Soft'

            anm = side+'_'+part+'_Ctrl_D_Soft'
            remap = side+'_'+part+'_Ctrl_D_Soft_Remap'

            if not cmds.objExists(remap):
                if cmds.objExists(anm):
                    cmds.shadingNode('remapValue', asUtility=True, name=remap)
                    vals = cmds.keyframe(anm, query=True, index=(0, 1), relative=True, valueChange=True)
                    cmds.setAttr(remap+'.outputMin', vals[0])
                    cmds.setAttr(remap+'.outputMax', vals[1])
                    cmds.setAttr(remap+'.inputMin', 0)
                    cmds.setAttr(remap+'.inputMax', 20)
                    cmds.connectAttr(ctrl+'.SoftIk', remap+'.inputValue', force=True)
                    cmds.connectAttr(remap+'.outColorR', ctrl+'.D_Soft', force=True)

                    cmds.delete(anm)

